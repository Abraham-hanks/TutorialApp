# TUTORIAL-APP API

## Introduction

The Tutorial-app API allows you to programmatically access data stored in a tutorial app user account with ease.
The easiest way to get started with the API is to read the documentation page and use the Postman App to send requests.

## Overview

1. You need a valid API Key to send requests to the API endpoints except /signup and /login endpoints. You can get your key by having an account with the Tutorial-app. Check [How to get API key](#Authentication) for explanation.

2. The Tutorial-app API will only respond to secured communication done over HTTPS.

3. Response to every request is sent in JSON format. In case the API request results in an error, it is represented by an "error": {} key in the JSON response.

4. The request method (verb) determines the nature of action you intend to perform. A request made using the GET method implies that you want to fetch something from Tutorial-app, and POST implies you want to save something new to Tutorial-app.

5. The API calls will respond with appropriate HTTP status codes for all requests, E.g Within a Postman Client, when a response is received, the status code is highlighted and is accompanied by a help text that indicates the possible meaning of the response code. A 200 OK indicates all went well, while 4XX or 5XX response codes indicate an error from the requesting client or our API servers respectively.

6. Individual resources in your Tutorial-app Account is accessible using its :user name/:resource name.


## Authentication

An API Key is required to be sent as part of every request to the Tutorial-app API, in the form of an Authorization request header.
If you do not have an API Key, you can easily generate one by logging in to Tutorial-app account, and then send a request for an API key. Due to no accessible UI (ongoing development), sending a GET request to api.tutorialapp/api/key/:token, generates an API key.
A {token} is gotten from a login requset for more [details](#login).

An API Key tells our API server that the request it received came from you. Everything that you have access to with your Tutorial-app account is accessible with an API Key that is generated by you.

API Key related error response
If an API Key is missing, malformed, or invalid, you will receive a 401 Unauthorised response code and the following JSON response:
{
  "error": { 
    status: false,
    "name": "AuthenticationError",
    "message": "API Key missing. Every request requires an API Key to be sent."
  }
}

NOTE: Errors are usually sent back in the JSON format above. A status of false, if the request failed and a message explaining the error that occured


## API REFERENCE

### USER

#### SIGNUP

POST Create Account  
https://api.tutorialapp/v1/signup
The /signup endpoint allows you create an account with the Tutorial-app. 
On successful creation of the account, the response returns the user name, id and success message.
Every account has a role: Admin or Tutor or Student. Admin role cannot be signed up for, only an existing admin can create another admin.

Requires NO API Key in request header. All fields in BODY are required.

HEADERS

Content-Type   application/json

BODY raw
{
    {
      "user_name": "unique_name",
      "first_name": "Some name",
      "last_name": "Some name",
      "role": "a role can be tutor or student",
      "email": "valid email",
      "password": "some secret password"
    }
}

Example Request
{
    {
      "user_name": "The Rock",
      "first_name": "Johnson",
      "last_name": "Dwayne",
      "role": "tutor",
      "email": "rockandroll@sevenbucks.com",
      "password": "DrockRules"
    }
}

Example Response 
200 － OK 
{
  {
    "status": true,
    "id": "5ebG5920acaTTd566decae6dea",
    "user_name": "The Rock",
    "message": "Successfully created user"
  }
}

Example Bad Request: "role" field is missing
{
    {
      "user_name": "The Rock",
      "first_name": "Johnson",
      "last_name": "Dwayne",
      "email": "rockandroll@sevenbucks.com",
      "password": "DrockRules"
    }
}

Example Response
400 - Bad Request
{
    "error": {
        "status": false,
        "message": "All fields required"
    }
}



#### LOGIN

POST  Create Access Token  
https://api.tutorialapp/v1/login
The /login endpoint allows you sign in to your Tutorial-app account. 
On successful authentication of user, the response returns the user name, id, token and success message.
The token is used in the body of a requset to generate an API key.

Requires NO API Key in request header. All fields in BODY are required.

HEADERS

Content-Type   application/json

BODY raw
{
    {
      "email": "valid_user_email",
      "password": "user_password"
    }
}

Example Request
{
    {
      "email": "rockandroll@sevenbucks.com",
      "password": "DrockRules"
    }
}

Example Response 
200 － OK 
{
  {
    "status": true,
    "_id": "5eb5957c87ef41424ca4829d",
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9",
    "message": "login successful"
  }
}

Example Not Enough Permissions: "password" field is incorrect
{
    {
      "email": "rockandroll@sevenbucks.com",
      "password": "Drocksucks"
    }
}

Example Response
403 - Forbidden
{
    "error": {
        "status": false,
        "message": "Incorrect username or password, please review details and try again"
    }
}



#### API KEY REQUEST

GET API Key 
https://api.tutorialapp/v1/api/key/:token
The /:token endpoint returns an API key that is needed to send subsequent requests to Tutorial-app API. The token is gotten from the response to a login request for [details](#login).


Requires NO API Key in request header. All fields in BODY are required.

HEADERS


Example Request
curl --location --request GET 'https://api.tutorialapp/v1/api/key/:token' \ 

Example Response 
200 － OK 
{
  {
    "status": true,
    "API_Key": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9"
    "message": "API Key generated successfully"
  }
}



GET All Tutors
https://api.tutorialapp/v1/user/tutors
The /:token endpoint returns an API key that is needed to send subsequent requests to Tutorial-app API. The token is gotten from the response to a login request for [details](#login).


Requires NO API Key in request header. All fields in BODY are required.

HEADERS


Example Request
curl --location --request GET 'https://api.tutorialapp/v1/user/tutors' \ 

Example Response 
200 － OK 
{
    "Tutors": [
        {
            "isAdmin": true,
            "active": true,
            "categories": [],
            "subjects": [],
            "lessons": [],
            "_id": "5eb5957c87ef41424ca4829d",
            "email": "example@gmail.com",
            "role": "tutor",
            "userName": "Hanks",
            "firstName": "Abraham",
            "lastName": "Osayi-Ekekhor"
        },
        {
            "isAdmin": false,
            "active": true,
            "categories": [],
            "subjects": [],
            "lessons": [],
            "_id": "5eb5959f87ef41424ca4829e",
            "email": "test1@gmail.com",
            "role": "tutor",
            "userName": "dtweezy",
            "firstName": "Dapo",
            "lastName": "Olumuyiwa"
        }
    ]
}



GET A Single Tutor
https://api.tutorialapp/v1/user/tutors/:id
The /:token endpoint returns an API key that is needed to send subsequent requests to Tutorial-app API. The token is gotten from the response to a login request for [details](#login).


Requires NO API Key in request header. All fields in BODY are required.

HEADERS


Example Request
curl --location --request GET 'https://api.tutorialapp/v1/user/tutors/:id' \ 

Example Response 
200 － OK 
{
  {
    "Tutor": {
        "isAdmin": true,
        "active": true,
        "categories": [],
        "subjects": [],
        "lessons": [],
        "_id": "5eb5957c87ef41424ca4829d",
        "email": "example@gmail.com",
        "role": "tutor",
        "userName": "Hanks",
        "firstName": "Abraham",
        "lastName": "Osayi-Ekekhor"
    }
  }
}


GET All Students
https://api.tutorialapp/v1/user/students
The /:token endpoint returns an API key that is needed to send subsequent requests to Tutorial-app API. The token is gotten from the response to a login request for [details](#login).


Requires NO API Key in request header. All fields in BODY are required.

HEADERS


Example Request
curl --location --request GET 'https://api.tutorialapp/v1/user/students' \ 

Example Response 
200 － OK 
{
    "Tutors": [
        {
            "isAdmin": true,
            "active": true,
            "categories": [],
            "subjects": [],
            "lessons": [],
            "_id": "5eb5957c87ef41424ca4829d",
            "email": "example@gmail.com",
            "role": "tutor",
            "userName": "Hanks",
            "firstName": "Abraham",
            "lastName": "Osayi-Ekekhor"
        },
        {
            "isAdmin": false,
            "active": true,
            "categories": [],
            "subjects": [],
            "lessons": [],
            "_id": "5eb5959f87ef41424ca4829e",
            "email": "test1@gmail.com",
            "role": "tutor",
            "userName": "dtweezy",
            "firstName": "Dapo",
            "lastName": "Olumuyiwa"
        }
    ]
}

POST Register tutor to take subject 
https://api.tutorialapp/v1/user/tutors/:categoryId/:subjectId
This endpoint allows you to create a category for subjects.
On successful creation of the Categor, the response returns the Category name, id and the uid.

Requires API Key as Authorization request header.
HEADERS

Authorization       API_Key

Content-Type        application/json

BODY raw
{
  {
    "tutor_id": "sample_id",
  }	
}


Example Request
{
  {
    "category_name": "JSS",
    "subjects":[
      {"subject_title": "Mathematics"},
      {"subject_title": "English"}
    ]
  }
}

Example Response 
200 － OK 
{
  {
    "status": true,
    "message": "Created category successfully"
  }
}


Example Bad Request: "subjects" field is required
{
  {
    "category_name": "JSS"
  }	
}

Example Response
400 - Bad Request
{
    "error": {
        "status": false,
        "message": "Category must have a name and subjects"
    }
}



PUT Update Tutor
https://api.tutorialapp/v1/user/tutors/:id
This endpoint allows you to update an existing collection using the Postman Collection v2 format. For more information about the v2 schema, check the format here.
On successful updation of the collection, the response returns the collection name, id and uid.
Requires API Key as X-Api-Key request header or apikey URL query parameter.
Note: Please be careful when trying to update the collection, as the existing collection will be replaced by the request body.
HEADERS

Content-Type       application/json
Authorization

BODY raw

{

}



### CATEGORY

GET All Categories
https://api.tutorialapp/v1/category
This endpoint allows you to create a category for subjects.
On successful creation of the Categor, the response returns the Category name, id and the uid.

Requires API Key as Authorization request header.
HEADERS

Authorization       API_Key

curl --location --request GET 'https://api.tutorialapp/v1/category' \
--header 'Authorization: '


Example Response 
200 － OK 
{
  "category_id": "5eb9c67a5048bb535448af2c",
  "subjects": [
    {
      "subjectTitle": "Mathematics",
      "subjectId": "5eb9c67b5048bb535448af2d"
    },
    {
      "subjectTitle": "English",
      "subjectId": "5eb9c67b5048bb535448af2e"
    }
  ]
}

POST Create Category 
https://api.tutorialapp/v1/category
This endpoint allows you to create a category for subjects.
On successful creation of the Categor, the response returns the Category name, id and the uid.

Requires API Key as Authorization request header.
HEADERS

Authorization       API_Key

Content-Type        application/json

BODY raw
{
  {
    "category_name": "JSS",
    "subjects":[
      {"subject_title": "Mathematics"},
      {"subject_title": "English"}
    ]
  }	
}


Example Request
{
  {
    "category_name": "JSS",
    "subjects":[
      {"subject_title": "Mathematics"},
      {"subject_title": "English"}
    ]
  }
}

Example Response 
200 － OK 
{
  {
    "status": true,
    "message": "Created category successfully"
  }
}


Example Bad Request: "subjects" field is required
{
  {
    "category_name": "JSS"
  }	
}

Example Response
400 - Bad Request
{
    "error": {
        "status": false,
        "message": "Category must have a name and subjects"
    }
}


PUT Update Category
https://api.tutorialapp/v1/category
This endpoint allows you to update an existing collection using the Postman Collection v2 format. For more information about the v2 schema, check the format here.
On successful updation of the collection, the response returns the collection name, id and uid.
Requires API Key as X-Api-Key request header or apikey URL query parameter.
Note: Please be careful when trying to update the collection, as the existing collection will be replaced by the request body.
HEADERS

Content-Type      application/json
Authorization

BODY raw

{
  {
    "category_name": "JSS",
    "subjects":[
      {"subject_title": "Mathematics"},
      {"subject_title": "English"}
    ]
  }
}



### SUBJECT

POST Create subject
https://api.tutorialapp/v1/category/subjects
This endpoint allows you to create a category for subjects.
On successful creation of the Categor, the response returns the Category name, id and the uid.

Requires API Key as Authorization request header.
HEADERS

Authorization       API_Key

Content-Type        application/json

BODY raw
{
  {
    "category_name": "JSS",
    "subject_title": "Basic Science"
  }	
}


Example Request
{
  {
    "category_name": "JSS",
    "subject_title": "Basic Science"
  }	
}

Example Response 
200 － OK 
{
  {
    "status": true,
    "subjectId": "5eb9e0e804094231484e9dc4",
    "message": "Subject created successfully"
  }
}


Example Bad Request: "subjects" field is required
{
  {
    "category_name": "JSS"
  }	
}

Example Response
400 - Bad Request
{
    "error": {
        "status": false,
        "message": "Category must have a name and subjects"
    }
}


GET All Subjects by Category
https://api.tutorialapp/v1/:categoryId/subjects
This endpoint allows you to create a category for subjects.
On successful creation of the Categor, the response returns the Category name, id and the uid.

Requires API Key as Authorization request header.
HEADERS

Authorization       API_Key

curl --location --request GET 'https://api.tutorialapp/v1/:categoryId/subjects' \
--header 'Authorization: '


Example Response 
200 － OK 
{
  {
    "status": true,
    "subject": {
      "tutors": [],
      "students": [],
      "lessons": [],
      "_id": "5eb9e0e804094231484e9dc4",
      "subjectTitle": "Basic Science",
      "category": "5eb9c67a5048bb535448af2c",
      "createdAt": "2020-05-11T23:34:00.482Z",
      "updatedAt": "2020-05-11T23:34:00.482Z",
      "__v": 0
    }
  }
}


GET Subjects in a Category by id
https://api.tutorialapp/v1/category/subjects/:id
This endpoint allows you to create a category for subjects.
On successful creation of the Categor, the response returns the Category name, id and the uid.

Requires API Key as Authorization request header.
HEADERS

Authorization       API_Key

curl --location --request GET 'https://api.tutorialapp/v1/category/subjects/:id' \
--header 'Authorization: '


Example Response 
200 － OK 
{
  {
    "status": true,
    "subject": {
      "tutors": [],
      "students": [],
      "lessons": [],
      "_id": "5eb9e0e804094231484e9dc4",
      "subjectTitle": "Basic Science",
      "category": "5eb9c67a5048bb535448af2c",
      "createdAt": "2020-05-11T23:34:00.482Z",
      "updatedAt": "2020-05-11T23:34:00.482Z",
      "__v": 0
    }
  }
}


GET Subjects in a Category by name
https://api.tutorialapp/v1/category/subjects/search/:subjectName
This endpoint allows you to create a category for subjects.
On successful creation of the Categor, the response returns the Category name, id and the uid.

Requires API Key as Authorization request header.
HEADERS

Authorization       API_Key

curl --location --request GET 'https://api.tutorialapp/v1/category/subjects/:id' \
--header 'Authorization: '


Example Response 
200 － OK 
{
  {
    "status": true,
    "subject": {
      "tutors": [],
      "students": [],
      "lessons": [],
      "_id": "5eb9e0e804094231484e9dc4",
      "subjectTitle": "Basic Science",
      "category": "5eb9c67a5048bb535448af2c",
      "createdAt": "2020-05-11T23:34:00.482Z",
      "updatedAt": "2020-05-11T23:34:00.482Z",
      "__v": 0
    }
  }
}


 
### LESSON

POST Create Lesson
https://api.tutorialapp/v1/category/subjects/lesson
This endpoint allows you to create a category for subjects.
On successful creation of the Categor, the response returns the Category name, id and the uid.

Requires API Key as Authorization request header.
HEADERS

Authorization       API_Key

Content-Type        application/json

BODY raw
{
  {
    "date": "12/05/2020",
    "tutor_id": "5eb5959f87ef41424ca4829e",
    "subject_id": "5eb9c67b5048bb535448af2d",
    "student_id": "5eb5988f1435d0044c42f6e4"
  }
}


Example Request
{
  {
    "date": "dd/mm/yyyy",
    "tutors": [
      {tutor_id: ""}
    ],
    "subject_id": "",
    "students":[
      {student_id: ""}
    ]
  }	
}

Example Response 
200 － OK 
{
  {
    "status": true,
    "message": "Subject created successfully"
  }
}


Example Bad Request: "subjects" field is required
{
  {
    "category_name": "JSS"
  }	
}

Example Response
400 - Bad Request
{
    "error": {
        "status": false,
        "message": "Category must have a name and subjects"
    }
}